webpackJsonp([2],{Q2rL:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("Dd8w"),n=t.n(r),i=t("iO/v"),o=t("NYxO"),a=t("nxfW"),c=t("i1rO"),l={name:"reset",components:{modal:i.l,iconInput:i.i,iconButton:i.h,successModal:i.p},data:function(){return{hasHeader:!0,isErr:!1,isAgainErr:!1,password:"",passwordAgain:"",isOk:!1,code:void 0}},computed:n()({visiable:function(e){return"reset"===e.path},onlyClose:function(e){return"emailReset"===Object(a.a)("type")}},Object(o.b)({path:"route/name",loading:"login/resetLoading"})),beforeCreate:function(){Object(a.a)("code")||this.$router.replace("/login")},mounted:function(){var e=this;this.$store.dispatch("login/checkCode",{code:Object(a.a)("code")}).catch(function(s){239===s.code&&e.$router.replace("/linkFailure")})},methods:{cancleHandler:function(){this.$router.push("/login")},change:function(e){var s=e.target.id;if(this.isErr=!this.password.match(/(?!^(\d+|[a-z]+|[A-Z]+|[~!`.@#$%^&*?\(\)\+\-\_\{\}\\\|\[\]:=;'"><]+)$)^[\w~!`.@#$%^&*?\(\)\+\-\_\{\}\\\|\[\]:=;'"><]{8,}$/),this.isOk=!!this.password&&!!this.passwordAgain&&this.password===this.passwordAgain,this.password!==this.passwordAgain&&this.passwordAgain&&this.password)return this.isAgainErr=!0,!1;this.isAgainErr=!1,this.$refs[s].$children[0].currentValue=this.$refs[s].$children[0].currentValue.trim()},submit:function(){var e=this;this.$store.dispatch("login/setPassword",{newPassword:Object(c.c)(this.password),reNewPassword:Object(c.c)(this.passwordAgain),type:this.$isPc?1:2,code:Object(a.a)("code")}).then(function(s){e.$isPc?e.$router.push("/successModal"):e.$Msg.show({type:"success",content:"重置成功",onClose:function(){e.$router.push("/login")}})}).catch(function(s){switch(+s.code){case 239:e.$router.push("/linkFailure")}e.$Msg.show({type:"error",content:"重置失败",onClose:function(){}})})}}},d={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container"},[t("modal",{attrs:{onlyClose:e.onlyClose,noMask:Boolean(!0),hasHeader:e.hasHeader,visiable:e.visiable},on:{cancleHandler:e.cancleHandler}},[t("div",{staticClass:"reset"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("login.reset")))]),e._v(" "),t("iconInput",{ref:"password",staticClass:"phone-input",attrs:{placeholder:e.$t("login.enterPassword"),"element-id":"password",isErr:e.isErr,type:"password",errMsg:e.$t("login.enterPasswordErr")},on:{"on-change":e.change},model:{value:e.password,callback:function(s){e.password="string"==typeof s?s.trim():s},expression:"password"}}),e._v(" "),t("iconInput",{ref:"repassword",staticClass:"phone-input",attrs:{placeholder:e.$t("login.enterPasswordAgain"),"element-id":"repassword",isErr:e.isAgainErr,type:"password",errMsg:e.$t("login.enterPasswordAgainErr")},on:{"on-change":e.change},model:{value:e.passwordAgain,callback:function(s){e.passwordAgain="string"==typeof s?s.trim():s},expression:"passwordAgain"}}),e._v(" "),t("iconButton",{staticClass:"button",attrs:{isShow:e.isOk,loading:e.loading},on:{click:e.submit}},[e._v("\n                  "+e._s(e.$t("login.submit"))+"\n              ")])],1)])],1)},staticRenderFns:[]};var p=t("VU/8")(l,d,!1,function(e){t("r2Bb")},"data-v-e7d670e0",null);s.default=p.exports},r2Bb:function(e,s){e.exports={title:"title",primary:"primary","bg-primary":"bg-primary",green:"green",yellow:"yellow","light-yellow":"light-yellow","placeholder-text":"placeholder-text","bg-yellow":"bg-yellow",red:"red","bg-red":"bg-red",right:"right",center:"center","space-between":"space-between",container:"container",reset:"reset","phone-input":"phone-input",button:"button","media-wrap":"media-wrap"}}});