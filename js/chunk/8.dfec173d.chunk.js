webpackJsonp([8],{"40gU":function(e,i){e.exports={title:"title",primary:"primary","bg-primary":"bg-primary",green:"green",yellow:"yellow","light-yellow":"light-yellow","placeholder-text":"placeholder-text","bg-yellow":"bg-yellow",red:"red","bg-red":"bg-red",right:"right",center:"center","space-between":"space-between",container:"container","modal-wrap":"modal-wrap","modal-title":"modal-title",input:"input",button:"button","media-wrap":"media-wrap"}},G50K:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("nvbp"),s=t.n(a),r=t("+6Bu"),n=t.n(r),l=t("Dd8w"),o=t.n(l),c=t("7+uW"),h=t("i1rO"),d=t("iO/v"),m=t("NYxO"),p=c.default.component("sunmi-emailModal",{props:{},data:function(){return{email:"",password:"",btn:!1,isEmailErr:!1,emailSuccessVisiable:!1,emailErrMsg:this.$t("personalCenter.emailErr"),isPasswordErr:!1,loading:!1}},computed:o()({},Object(m.b)({imgCode:"personalCenter/imgCode",showCheckBoxCode:"personalCenter/showCheckBoxCode",checkBoxErr:"personalCenter/checkBoxErr"})),methods:{change:function(){this.btn=!!this.email&&!!this.password&&!this.isEmailErr},emailChange:function(){this.checkEmail(),this.change()},repeatSendEmail:function(e,i){this.sendEmail({password:Object(h.c)(this.password),newEmail:this.email,lang:"zh"===this.$i18n.locale?"CN":"EN",url:location.host+"?type=changeEmail",imgCode:e,captchaKey:this.imgCode.captchaKey,cb:this.emailSuccessVisiable?i:function(){}})},sendEmail:function(e){var i=this,t=e.cb,a=n()(e,["cb"]);this.loading=!0,this.isEmailErr=!1,this.isErr=!1,this.$store.dispatch("personalCenter/sendUpdateEmail",a).then(function(){i.emailSuccessVisiable=!0,i.closeCheckCode(),t&&t()}).catch(function(e){switch(+e.code){case 201:i.isErr=!0,i.closeCheckCode();break;case 204:i.isEmailErr=!0,i.emailErrMsg=i.$t("personalCenter.emailBundled")}}).finally(function(){i.loading=!1})},submit:function(){this.sendEmail({password:Object(h.c)(this.password),newEmail:this.email,lang:"zh"===this.$i18n.locale?"CN":"EN",url:location.host+"?type=changeEmail"})},checkEmail:function(){this.isEmailErr=!this.email.match(/^[A-Za-z0-9]+([-_.][A-Za-z0-9]+)*@([A-Za-z0-9]+[-.])+[A-Za-z0-9]{2,5}$/),this.emailErrMsg=this.$t("personalCenter.emailErr")},sendCheckCode:function(){this.$store.dispatch("personalCenter/getImgCode")},closeCheckCode:function(){this.$store.commit("personalCenter/HIDE_CHECK_BOX_CODE")},cancleModalHandler:function(){this.$router.replace("/personalCenter")},cancleSuccessModalHandler:function(){this.cancleModalHandler(),this.emailSuccessVisiable=!1}},render:function(e){var i=this;return e("div",[e(d.l,s()([{attrs:{visiable:!0,hasHeader:!0,onlyClose:!0},on:{cancleHandler:this.cancleModalHandler}},{on:o()({},this.$listeners),attrs:o()({},this.$attrs)}]),[e("div",{class:"modal-wrap"},[e("div",{class:"title modal-title "},[this.$t("personalCenter.changeEmail")]),e(d.i,s()([{class:"input",attrs:{value:i.password},on:{input:function(e){i.password=e}}},{directives:[{name:"model",value:i.password}]},{attrs:{placeholder:this.$t("personalCenter.enterPassword"),isErr:this.isErr,errMsg:this.$t("personalCenter.passwordErr"),type:"password"},on:{"on-change":this.change}}])),e(d.i,s()([{class:"input",attrs:{value:i.email},on:{input:function(e){i.email=e}}},{directives:[{name:"model",value:i.email}]},{attrs:{placeholder:this.$t("personalCenter.enterNewEmail"),isErr:this.isEmailErr,errMsg:this.emailErrMsg},on:{"on-change":this.emailChange}}])),e(d.h,{attrs:{isShow:this.btn,loading:this.loading},class:"button",on:{click:this.submit}},[this.$t("personalCenter.submit")])])]),e(d.g,{attrs:{visiable:this.emailSuccessVisiable,email:this.email,checkBoxErr:this.checkBoxErr,emailImgCode:this.imgCode,showCheckBoxCode:this.showCheckBoxCode},on:{cancleHandler:this.cancleSuccessModalHandler,repeatSendEmail:this.repeatSendEmail,resetImg:this.sendCheckCode,closeCheckCode:this.closeCheckCode}})])}});var u=t("VU/8")(p,null,!1,function(e){t("40gU")},"data-v-4428ad3e",null);i.default=u.exports}});