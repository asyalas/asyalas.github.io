webpackJsonp([12],{"+WkQ":function(e,i){e.exports={title:"title",primary:"primary","bg-primary":"bg-primary",green:"green",yellow:"yellow","light-yellow":"light-yellow","placeholder-text":"placeholder-text","bg-yellow":"bg-yellow",red:"red","bg-red":"bg-red",right:"right",center:"center","space-between":"space-between",container:"container","email-reset":"email-reset","check-wrap":"check-wrap","check-input":"check-input","email-input":"email-input",button:"button","media-wrap":"media-wrap"}},"6n2x":function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("Dd8w"),c=t.n(a),n=t("iO/v"),s=t("NYxO"),l={name:"phoneReset",components:{modal:n.l,iconInput:n.i,iconButton:n.h,checkCode:n.d,emailSuccessModal:n.g},data:function(){return{hasHeader:!0,email:"",check:"",sendEmail:!1,isOk:!1,loading:!1,isEmErr:!1,emailErr:this.$t("login.emailErr"),isCheckErr:!1}},computed:c()({visiable:function(e){return"emailReset"===e.path}},Object(s.b)({path:"route/name",emailImgCode:"login/imgCode",showCheckBoxCode:"login/showCheckBoxCode",checkBoxErr:"login/checkBoxErr"})),mounted:function(){this.sendCheckCode()},methods:{sendCheckCode:function(){this.$store.dispatch("login/getImgCode")},cancleHandler:function(){this.$router.push("/login")},checkEmail:function(){this.isEmErr=!this.email.match(/^[A-Za-z0-9]+([-_.][A-Za-z0-9]+)*@([A-Za-z0-9]+[-.])+[A-Za-z0-9]{2,5}$/),this.isEmMsg=this.$t("login.emailErr"),this.change()},change:function(){this.isOk=!!this.email&&!this.isEmErr&&!!this.check&&4===this.check.length},closeCheckCode:function(){this.$store.commit("login/HIDE_CHECK_BOX_CODE")},repeatSendEmail:function(e,i){var t=this,a=location.host+"/login/reset?type=emailReset";this.$store.dispatch("login/emailReset",{email:this.email,type:this.$isPc?1:2,captchaKey:this.emailImgCode.captchaKey,imgCode:e,url:a,lang:"zh"===this.$i18n.locale?"CN":"EN",isReSend:1}).then(function(){i(),t.$store.commit("login/HIDE_CHECK_BOX_CODE")})},submit:function(){var e=this,i=location.host+"/login/reset?type=emailReset";this.loading=!0,this.isEmErr=!1,this.isCheckErr=!1,this.$store.dispatch("login/emailReset",{email:this.email,type:this.$isPc?1:2,captchaKey:this.emailImgCode.captchaKey,imgCode:this.check,url:i,lang:"zh"===this.$i18n.locale?"CN":"EN",isReSend:0}).then(function(){e.sendEmail=!0}).catch(function(i){switch(Number(i.code)){case 3521:e.isEmErr=!0,e.emailErr=e.$t("common.emailNotExist");break;case 2055:case 2003:e.isCheckErr=!0}}).finally(function(){e.loading=!1})}}},o={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"container"},[e.sendEmail?e._e():t("modal",{attrs:{hasHeader:e.hasHeader,onlyClose:e.sendEmail,visiable:e.visiable,noMask:Boolean(!0)},on:{cancleHandler:e.cancleHandler}},[t("div",{staticClass:"email-reset"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("login.emailReset")))]),e._v(" "),t("iconInput",{staticClass:"email-input",attrs:{placeholder:e.$t("login.enterEmail"),isErr:e.isEmErr,errMsg:e.emailErr},on:{"on-change":e.checkEmail},model:{value:e.email,callback:function(i){e.email=i},expression:"email"}}),e._v(" "),t("div",{staticClass:"check-wrap"},[t("iconInput",{staticClass:"check-input",attrs:{placeholder:e.$t("login.check"),maxlength:Number(4),isErr:e.isCheckErr,errMsg:e.$t("login.emailCheck")},on:{"on-change":e.change},model:{value:e.check,callback:function(i){e.check=i},expression:"check"}}),e._v(" "),t("checkCode",{attrs:{url:e.emailImgCode.url},on:{reset:e.sendCheckCode}})],1),e._v(" "),t("iconButton",{staticClass:"button",attrs:{isShow:e.isOk,loading:e.loading},on:{click:e.submit}},[e._v("\n          "+e._s(e.$t("login.submit"))+"\n        ")])],1)]),e._v(" "),t("emailSuccessModal",{attrs:{visiable:e.sendEmail,email:e.email,checkBoxErr:e.checkBoxErr,emailImgCode:e.emailImgCode,showCheckBoxCode:e.showCheckBoxCode},on:{cancleHandler:e.cancleHandler,repeatSendEmail:e.repeatSendEmail,resetImg:e.sendCheckCode,closeCheckCode:e.closeCheckCode}})],1)},staticRenderFns:[]};var r=t("VU/8")(l,o,!1,function(e){t("+WkQ")},"data-v-1c5ba2ce",null);i.default=r.exports}});